/*! fractal-explorer v0.3.4 | 2017-08-22 | (c) Bennett Zhang | https://github.com/bennett-zhang/fractal-explorer */

!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return a(n||e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.Split=r()}(this,function(){"use strict";var e=window,t=e.document,n="addEventListener",r="removeEventListener",a="getBoundingClientRect",i=function(){return!1},o=e.attachEvent&&!e[n],s=["","-webkit-","-moz-","-o-"].filter(function(e){var n=t.createElement("div");return n.style.cssText="width:"+e+"calc(9px)",!!n.style.length}).shift()+"calc",l=function(e){return"string"==typeof e||e instanceof String?t.querySelector(e):e};return function(u,c){function f(e,t,n){var r=I(y,t,n);Object.keys(r).forEach(function(t){return e.style[t]=r[t]})}function m(e,t){var n=j(y,t);Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}function g(e){var t=E[this.a],n=E[this.b],r=t.size+n.size;t.size=e/this.size*r,n.size=r-e/this.size*r,f(t.element,t.size,this.aGutterSize),f(n.element,n.size,this.bGutterSize)}function v(e){var t;this.dragging&&((t="touches"in e?e.touches[0][b]-this.start:e[b]-this.start)<=E[this.a].minSize+D+this.aGutterSize?t=E[this.a].minSize+this.aGutterSize:t>=this.size-(E[this.b].minSize+D+this.bGutterSize)&&(t=this.size-(E[this.b].minSize+this.bGutterSize)),g.call(this,t),c.onDrag&&c.onDrag())}function h(){var e=E[this.a].element,t=E[this.b].element;this.size=e[a]()[y]+t[a]()[y]+this.aGutterSize+this.bGutterSize,this.start=e[a]()[x]}function d(){var t=this,n=E[t.a].element,a=E[t.b].element;t.dragging&&c.onDragEnd&&c.onDragEnd(),t.dragging=!1,e[r]("mouseup",t.stop),e[r]("touchend",t.stop),e[r]("touchcancel",t.stop),t.parent[r]("mousemove",t.move),t.parent[r]("touchmove",t.move),delete t.stop,delete t.move,n[r]("selectstart",i),n[r]("dragstart",i),a[r]("selectstart",i),a[r]("dragstart",i),n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",a.style.userSelect="",a.style.webkitUserSelect="",a.style.MozUserSelect="",a.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor=""}function p(t){var r=this,a=E[r.a].element,o=E[r.b].element;!r.dragging&&c.onDragStart&&c.onDragStart(),t.preventDefault(),r.dragging=!0,r.move=v.bind(r),r.stop=d.bind(r),e[n]("mouseup",r.stop),e[n]("touchend",r.stop),e[n]("touchcancel",r.stop),r.parent[n]("mousemove",r.move),r.parent[n]("touchmove",r.move),a[n]("selectstart",i),a[n]("dragstart",i),o[n]("selectstart",i),o[n]("dragstart",i),a.style.userSelect="none",a.style.webkitUserSelect="none",a.style.MozUserSelect="none",a.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",r.gutter.style.cursor=G,r.parent.style.cursor=G,h.call(r)}function z(e){e.forEach(function(t,n){if(n>0){var r=L[n-1],a=E[r.a],i=E[r.b];a.size=e[n-1],i.size=t,f(a.element,a.size,r.aGutterSize),f(i.element,i.size,r.bGutterSize)}})}function S(){L.forEach(function(e){e.parent.removeChild(e.gutter),E[e.a].element.style[y]="",E[e.b].element.style[y]=""})}void 0===c&&(c={});var y,b,x,E,w=l(u[0]).parentNode,T=e.getComputedStyle(w).flexDirection,A=c.sizes||u.map(function(){return 100/u.length}),_=void 0!==c.minSize?c.minSize:100,C=Array.isArray(_)?_:u.map(function(){return _}),U=void 0!==c.gutterSize?c.gutterSize:10,D=void 0!==c.snapOffset?c.snapOffset:30,R=c.direction||"horizontal",G=c.cursor||("horizontal"===R?"ew-resize":"ns-resize"),M=c.gutter||function(e,n){var r=t.createElement("div");return r.className="gutter gutter-"+n,r},I=c.elementStyle||function(e,t,n){var r={};return"string"==typeof t||t instanceof String?r[e]=t:r[e]=o?t+"%":s+"("+t+"% - "+n+"px)",r},j=c.gutterStyle||function(e,t){return n={},n[e]=t+"px",n;var n};"horizontal"===R?(y="width",b="clientX",x="left"):"vertical"===R&&(y="height",b="clientY",x="top");var L=[];return E=u.map(function(e,t){var r,i={element:l(e),size:A[t],minSize:C[t]};if(t>0&&(r={a:t-1,b:t,dragging:!1,isFirst:1===t,isLast:t===u.length-1,direction:R,parent:w},r.aGutterSize=U,r.bGutterSize=U,r.isFirst&&(r.aGutterSize=U/2),r.isLast&&(r.bGutterSize=U/2),"row-reverse"===T||"column-reverse"===T)){var s=r.a;r.a=r.b,r.b=s}if(!o&&t>0){var c=M(t,R);m(c,U),c[n]("mousedown",p.bind(r)),c[n]("touchstart",p.bind(r)),w.insertBefore(c,i.element),r.gutter=c}0===t||t===u.length-1?f(i.element,i.size,U/2):f(i.element,i.size,U);var g=i.element[a]()[y];return g<i.minSize&&(i.minSize=g),t>0&&L.push(r),i}),o?{setSizes:z,destroy:S}:{setSizes:z,getSizes:function(){return E.map(function(e){return e.size})},collapse:function(e){if(e===L.length){var t=L[e-1];h.call(t),o||g.call(t,t.size-t.bGutterSize)}else{var n=L[e];h.call(n),o||g.call(n,n.aGutterSize)}},destroy:S}}})},{}],2:[function(e,t,n){"use strict";function r(e,t){var n=e.length;if(n!==t.length)throw"Need an equal count of xs and ys.";if(0===n)return function(){return 0};if(1===n){var r=+t[0];return function(){return r}}for(var a=[],i=0;i<n;i++)a.push(i);a.sort(function(t,n){return e[t]<e[n]?-1:1});var o=e,s=t;e=[],t=[];for(var l=0;l<n;l++)e.push(+o[a[l]]),t.push(+s[a[l]]);for(var u=[],c=[],f=[],m=0;m<n-1;m++){var g=e[m+1]-e[m],v=t[m+1]-t[m];c.push(g),u.push(v),f.push(v/g)}for(var h=[f[0]],d=0;d<c.length-1;d++){var p=f[d],z=f[d+1];if(p*z<=0)h.push(0);else{var S=c[d],y=c[d+1],b=S+y;h.push(3*b/((b+y)/p+(b+S)/z))}}h.push(f[f.length-1]);for(var x=[],E=[],w=0;w<h.length-1;w++){var T=h[w],A=f[w],_=1/c[w],C=T+h[w+1]-A-A;x.push((A-T-C)*_),E.push(C*_*_)}return function(n){var r=e.length-1;if(n===e[r])return t[r];for(var a=0,i=void 0,o=E.length-1;a<=o;){i=Math.floor((a+o)/2);var s=e[i];if(s<n)a=i+1;else{if(!(s>n))return t[i];o=i-1}}r=Math.max(0,o);var l=n-e[r],u=l*l;return t[r]+h[r]*l+x[r]*u+E[r]*l*u}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n=[],a=[],i=[],o=[],s=0;s<e.length;s++){var l=e[s];n.push(l[0]);var u=l[1];a.push(u>>16&255),i.push(u>>8&255),o.push(255&u)}for(var c=r(n,a),f=r(n,i),m=r(n,o),g=[],v=1/t,h=0;h<1;h+=v)g.push(c(h),f(h),m(h));return new Uint8Array(g)}},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r={};return r.$canvas=$(e),r.canvas=r.$canvas[0],r.gl=(0,d.initGl)(r),r.program=(0,d.initProgram)(r),r.uniforms=(0,d.getUniforms)(r,["realMin","imagMin","maxIterations","isJulia","jconstant","overCanvas","palette"]),r.bounds=t,n&&(r.gl.uniform1i(r.uniforms.isJulia,!0),r.constant=n),(0,d.initTexture)(r,A),r.gl.uniform1i(r.uniforms.palette,0),r}function i(){y.text("Iteration count = "+T)}function o(){b.text("Showing Julia set for c = "+C.constant.real+" + "+C.constant.imag+"i")}function s(e){var t=e.$canvas,n=e.canvas,r=e.gl;n.width=t.width(),n.height=t.height(),r.viewport(0,0,n.width,n.height),u(e),c(e)}function l(){s(_),s(C)}function u(e){var t=e.canvas,n=e.bounds;n.real.range=Math.abs(n.real.range),n.imag.range=Math.abs(n.imag.range);var r=n.real.range/n.imag.range,a=t.width/t.height;r<a?n.real.range=n.imag.range*a:r>a&&(n.imag.range=n.real.range/a),n.real.min=n.real.mid-n.real.range/2,n.real.max=n.real.mid+n.real.range/2,n.imag.min=n.imag.mid-n.imag.range/2,n.imag.max=n.imag.mid+n.imag.range/2,n.overCanvas=n.real.range/t.width}function c(e){var t=e.gl,n=e.uniforms,r=e.bounds,a=e.constant;t.uniform1f(n.realMin,r.real.min),t.uniform1f(n.imagMin,r.imag.min),t.uniform1f(n.overCanvas,r.overCanvas),t.uniform1i(n.maxIterations,T),a&&t.uniform2f(n.jconstant,a.real,a.imag),(0,d.renderGl)(t)}function f(e,t,n){var r=e.bounds;return{real:r.real.min+t*r.overCanvas,imag:r.imag.max-n*r.overCanvas}}function m(e){var t=e.bounds;z.keydown(function(n){switch(n.which){case 38:case 87:n.shiftKey?(t.real.range/=w,t.imag.range/=w):t.imag.mid+=t.imag.range*E;break;case 37:case 65:t.real.mid-=t.real.range*E;break;case 40:case 83:n.shiftKey?(t.real.range*=w,t.imag.range*=w):t.imag.mid-=t.imag.range*E;break;case 39:case 68:t.real.mid+=t.real.range*E}u(e),c(e)})}function g(e){var t=e.$canvas,n=(e.canvas,e.bounds);t.mousedown(function(r){function a(t){t.preventDefault();var a=t.clientX-s.left,i=t.clientY-s.top,g=f(e,a,i);if(r.shiftKey)C.constant=g,o(),c(C);else{var v=f(e,l,m);l=a,m=i,n.real.mid+=v.real-g.real,n.imag.mid+=v.imag-g.imag,u(e),c(e)}}function i(e){e.preventDefault(),z.off("mousemove",a),z.off("mouseup",i),S.removeClass("alias all-scroll")}r.preventDefault();var s=t.offset(),l=r.clientX-s.left,m=r.clientY-s.top;r.shiftKey?(C.constant=f(e,l,m),o(),c(C),S.addClass("alias")):S.addClass("all-scroll"),z.mousemove(a),z.mouseup(i)})}function v(e){var t=e.$canvas,n=e.bounds;t.on("wheel",function(r){r.preventDefault();var a=t.offset(),i=r.clientX-a.left,o=r.clientY-a.top;r.originalEvent.deltaY<0?(n.real.range/=w,n.imag.range/=w,S.addClass("zoom-in")):(n.real.range*=w,n.imag.range*=w,S.addClass("zoom-out"));var s=f(e,i,o);u(e);var l=f(e,i,o);n.real.mid-=l.real-s.real,n.imag.mid-=l.imag-s.imag,u(e),c(e),clearTimeout($.data(t,"scrollTimer")),$.data(t,"scrollTimer",setTimeout(function(){return S.removeClass("zoom-in zoom-out")},250))})}var h=r(e("./color-gradient.js")),d=e("./webgl-utils.js"),p=r(e("split.js")),z=$(window),S=$("html"),y=$("#iteration-text"),b=$("#julia-constant-text"),x=$("#controls-dialog");setTimeout(function(){x.dialog({width:"25em",buttons:[{text:"Got it!",click:function(){x.dialog("close")}}],show:"scale",hide:"puff"}).tooltip()},500);var E=.05,w=1.1,T=200,A=(0,h.default)([[0,0],[.1,4458565],[.2,8198728],[.3,13004599],[.4,15788371],[.5,16777215],[.6,10021265],[.7,5753262],[.8,2382746],[.9,463174],[1,0]],2048),_=a("#mandelbrot-canvas",{real:{min:null,mid:-.7,max:null,range:3},imag:{min:null,mid:0,max:null,range:2.4},overCanvas:null}),C=a("#julia-canvas",{real:{min:null,mid:0,max:null,range:3.6},imag:{min:null,mid:0,max:null,range:3.6},overCanvas:null},{real:-.77,imag:-.09});i(),o(),$(l),z.resize(l),(0,p.default)(["#mandelbrot-canvas-wrapper","#julia-canvas-wrapper"],{direction:"horizontal",cursor:"col-resize",onDrag:l}),m(_),m(C),z.keydown(function(e){switch(e.which){case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:T=100*Math.pow(2,e.which-51);break;case 189:T-=100,T=Math.max(T,0);break;case 187:T+=100}i(),c(_),c(C)}),g(_),g(C),v(_),v(C)},{"./color-gradient.js":2,"./webgl-utils.js":4,"split.js":1}],4:[function(e,t,n){"use strict";function r(e,t,n){var r=e.createShader(n),o=void 0;return"fractal.vert"===t?o=a:"fractal.frag"===t&&(o=i),o?(e.shaderSource(r,o),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(alert("An error occured compiling the shaders: "+e.getShaderInfoLog(r)),null)):(alert("Could not find shader source: "+t),null)}Object.defineProperty(n,"__esModule",{value:!0}),n.initGl=function(e){var t=e.canvas,n=t.getContext("webgl")||t.getContext("experimental-webgl");return n||(alert("Unable to initialize WebGL. Your browser may not support it."),null)},n.initProgram=function(e){var t=e.gl,n=r(t,"fractal.vert",t.VERTEX_SHADER),a=r(t,"fractal.frag",t.FRAGMENT_SHADER),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))return alert("Unable to initialize the shader program: "+t.getProgramInfoLog(i)),null;t.useProgram(i);var s=t.getAttribLocation(i,"vertexPosition");t.enableVertexAttribArray(s);var l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o.reduce(function(e,t){return e.concat(t)})),t.STATIC_DRAW),i},n.getUniforms=function(e,t){for(var n=e.gl,r=e.program,a={},i=0;i<t.length;i++){var o=t[i];a[o]=n.getUniformLocation(r,o)}return a},n.initTexture=function(e,t){var n=e.gl,r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGB,t.length/3,1,0,n.RGB,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),r},n.renderGl=function(e){e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,o.length)};var a="\nattribute vec4 vertexPosition;\n\nvoid main() {\n\tgl_Position = vertexPosition;\n}\n",i="\nprecision highp float;\n\nuniform float realMin;\nuniform float imagMin;\nuniform float overCanvas;\nuniform int maxIterations;\nconst float BAILOUT_RADIUS = 4.0;\nuniform bool isJulia;\nuniform vec2 jconstant;\nuniform sampler2D palette;\nconst float GRADIENT_SCALE = 0.03125;\n\nvec4 getFractalColor(vec2 z) {\n\tvec2 zSq;\n\tvec2 c;\n\tif (isJulia)\n\t\tc = jconstant;\n\telse\n\t\tc = z;\n\n\tfor (int i = 0; i < 10000; i++) {\n\t\tzSq = vec2(z.x * z.x, z.y * z.y);\n\t\tz = vec2(zSq.x - zSq.y + c.x, 2.0 * z.x * z.y + c.y);\n\n\t\tif (zSq.x + zSq.y > BAILOUT_RADIUS) {\n\t\t\tfor (int j = 0; j < 3; j++) {\n\t\t\t\tzSq = vec2(z.x * z.x, z.y * z.y);\n\t\t\t\tz = vec2(zSq.x - zSq.y, 2.0 * z.x * z.y) + c;\n\t\t\t}\n\n\t\t\tfloat mu = float(i) + 1.0 - log2(log(zSq.x + zSq.y) / 2.0);\n\t\t\treturn texture2D(palette, vec2(mu * GRADIENT_SCALE, 0.0));\n\t\t}\n\n\t\tif (i > maxIterations) return vec4(0, 0, 0, 1);\n\t}\n}\n\nvoid main() {\n\tgl_FragColor = getFractalColor(vec2(realMin + gl_FragCoord.x * overCanvas, imagMin + gl_FragCoord.y * overCanvas));\n}\n",o=[[1,1],[1,-1],[-1,-1],[-1,1]]},{}]},{},[3]);